services:
  web:
    image: Dockerfile
    buildArgs:
      SMTP_HOST: ${SMTP_HOST}
      SMTP_USERNAME: ${SMTP_USERNAME}
      SMTP_PASSWORD: ${SMTP_PASSWORD}
    port: 8083
  postgres:
    image: postgres:13
    startCommand: postgres -c 'max_connections=1000'


build:
  commands:
    - mvn package
  artifacts:
    - name: email
      context: .
      docker:
        dockerfile: Dockerfile